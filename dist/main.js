(()=>{"use strict";class t{constructor(t){this.length=t,this.hits=0,this.sunk=!1}get length(){return this._length}set length(t){this._length=t}hit(){this.hits+=1,this.isSunk()}isSunk(){this.hits==this.length&&(this.sunk=!0)}}class e{constructor(){this.board=[new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1})))],this.ships=[]}placeShip(e,i,r){if(null==this.board[e][i].ship){let a=new t(r);this.ships.push(a);for(let t=i;t<i+r;t++)this.board[e][t].ship=a}}receiveAttack(t,e){null!=this.board[t][e].ship?(this.board[t][e].ship.hit(),this.board[t][e].isHit=!0):null==this.board[t][e].ship&&(this.board[t][e].isHit=!0)}allShipsSunk(){if(this.ships.every((t=>1==t.sunk)))return!0}}class i{constructor(t){this.isComputer=t,this.gameboard=new e}generateCoord(){return Math.floor(10*Math.random())}takeTurn(t,e,i){t.receiveAttack(e,i)}takeTurnAI(t){let e=0,i=0,r=!0;for(;r;)e=this.generateCoord(),i=this.generateCoord(),0==t.board[e][i].isHit&&(t.receiveAttack(e,i),r=!1)}}let r=document.querySelector(".human-grid"),a=document.querySelector(".computer-grid");function l(){n(r);for(let t=0;t<10;t++)for(let e=0;e<10;e++)if(null==o.gameboard.board[t][e].ship&&0==o.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),r.appendChild(i)}else if(null!=o.gameboard.board[t][e].ship&&0==o.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship"),i.setAttribute("id",t.toString()+e.toString()),r.appendChild(i)}else if(null==o.gameboard.board[t][e].ship&&1==o.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-hit"),i.setAttribute("id",t.toString()+e.toString()),r.appendChild(i)}else if(null!=o.gameboard.board[t][e].ship&&1==o.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship-hit"),i.setAttribute("id",t.toString()+e.toString()),r.appendChild(i)}}function s(){n(a);for(let t=0;t<10;t++)for(let e=0;e<10;e++)if(null==d.gameboard.board[t][e].ship&&0==d.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),a.appendChild(i)}else if(null!=d.gameboard.board[t][e].ship&&0==d.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),a.appendChild(i)}else if(null==d.gameboard.board[t][e].ship&&1==d.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-hit"),i.setAttribute("id",t.toString()+e.toString()),a.appendChild(i)}else if(null!=d.gameboard.board[t][e].ship&&1==d.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship-hit"),i.setAttribute("id",t.toString()+e.toString()),a.appendChild(i)}Array.from(document.querySelectorAll(".computer-grid > div")).forEach((t=>{t.addEventListener("click",h)}))}function n(t){for(;t.firstChild;)t.removeChild(t.firstChild)}let o=new i(!1),d=new i(!0);function h(t){let e=t.target.id,i=e[0],r=e[1];0==d.gameboard.board[i][r].isHit&&(o.takeTurn(d.gameboard,i,r),s(),function(){let t=Array.from(document.querySelectorAll(".computer-grid > div"));d.gameboard.allShipsSunk()?(console.log("You Win!"),t.forEach((t=>{t.removeEventListener("click",h)}))):o.gameboard.allShipsSunk()&&(console.log("You Lose!"),t.forEach((t=>{t.removeEventListener("click",h)})))}(),d.takeTurnAI(o.gameboard),l())}o.gameboard.placeShip(2,3,5),o.gameboard.placeShip(0,1,4),o.gameboard.placeShip(4,4,3),o.gameboard.placeShip(6,7,3),o.gameboard.placeShip(8,1,2),d.gameboard.placeShip(0,1,2),l(),s()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxLQXhDSkcsRUFBTWhCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBQzlCMkIsRUFBTWhCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBQzlCMkIsRUFBTWhCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBQzlCMkIsRUFBTWhCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBQzlCMkIsRUFBTWhCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBRTlCb0MsRUFBU3pCLFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBRWpDd0IsSUFDQVcsSyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBTaGlwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuaGl0cyA9IDA7XG4gICAgICAgIHRoaXMuc3VuayA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG4gICAgfVxuXG4gICAgc2V0IGxlbmd0aChsZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoO1xuICAgIH1cblxuICAgIGhpdCgpIHtcbiAgICAgICAgdGhpcy5oaXRzICs9IDE7XG4gICAgICAgIHRoaXMuaXNTdW5rKCk7XG4gICAgfVxuXG4gICAgaXNTdW5rKCkge1xuICAgICAgICBpZih0aGlzLmhpdHMgPT0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc3VuayA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZWJvYXJkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ib2FyZCA9IFtcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSlcbiAgICAgICAgXVxuXG4gICAgICAgIHRoaXMuc2hpcHMgPSBbXVxuICAgIH1cblxuICAgIHBsYWNlU2hpcCh4UG9zLCB5UG9zLCBsZW5ndGgpIHtcbiAgICAgICAgaWYodGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5zaGlwID09IG51bGwpIHtcbiAgICAgICAgICAgIGxldCBuZXdTaGlwID0gbmV3IFNoaXAobGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc2hpcHMucHVzaChuZXdTaGlwKTtcbiAgICAgICAgICAgIC8vaG9yaXpvbnRhbCBzaGlwXG4gICAgICAgICAgICBmb3IobGV0IGkgPSB5UG9zOyBpIDwgeVBvcyArIGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVtpXS5zaGlwID0gbmV3U2hpcDsgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlY2VpdmVBdHRhY2soeFBvcywgeVBvcykge1xuICAgICAgICAvL2lmIHRoZSBzcXVhcmUgaGFzIGEgc2hpcCBvbiBpdFxuICAgICAgICBpZih0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5zaGlwLmhpdCgpO1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy9pZiB0aGVyZSBzcXVhcmUgZG9lcyBub3QgaGF2ZSBhIHNoaXAgb24gaXRcbiAgICAgICAgZWxzZSBpZih0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9IHRydWU7ICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxTaGlwc1N1bmsoKSB7XG4gICAgICAgIGlmKHRoaXMuc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLnN1bmsgPT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3Rvcihpc0NvbXB1dGVyKSB7XG4gICAgICAgIHRoaXMuaXNDb21wdXRlciA9IGlzQ29tcHV0ZXI7XG4gICAgICAgIHRoaXMuZ2FtZWJvYXJkID0gbmV3IEdhbWVib2FyZDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNvb3JkKCkge1xuICAgICAgICAvL3JhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgfVxuXG4gICAgdGFrZVR1cm4oZW5lbXlHYW1lYm9hcmQsIHhQb3MsIHlQb3MpIHtcbiAgICAgICAgZW5lbXlHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4UG9zLCB5UG9zKTsgXG4gICAgfVxuXG4gICAgdGFrZVR1cm5BSShlbmVteUdhbWVib2FyZCkge1xuICAgICAgICBsZXQgeFBvcyA9IDA7XG4gICAgICAgIGxldCB5UG9zID0gMDtcbiAgICAgICAgbGV0IGtlZXBHb2luZyA9IHRydWU7XG5cbiAgICAgICAgd2hpbGUoa2VlcEdvaW5nKSB7XG4gICAgICAgICAgICB4UG9zID0gdGhpcy5nZW5lcmF0ZUNvb3JkKCk7XG4gICAgICAgICAgICB5UG9zID0gdGhpcy5nZW5lcmF0ZUNvb3JkKCk7XG4gICAgICAgICAgICBpZihlbmVteUdhbWVib2FyZC5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGVuZW15R2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soeFBvcywgeVBvcyk7XG4gICAgICAgICAgICAgICAga2VlcEdvaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgaHVtYW4sIGNvbXB1dGVyLCBjbGlja0hhbmRsZXIgfSBmcm9tIFwiLi9nYW1lQ29udHJvbGxlclwiO1xuXG5sZXQgaHVtYW5HcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5odW1hbi1ncmlkXCIpO1xubGV0IGNvbXB1dGVyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcHV0ZXItZ3JpZFwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBvcHVsYXRlUGxheWVyQm9hcmQoKSB7XG4gICAgY2xlYXJCb2FyZChodW1hbkdyaWQpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgICAgIC8vbm8gc2hpcCBubyBoaXRcbiAgICAgICAgICAgIGlmKGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09IG51bGwgJiYgaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmVcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaHVtYW5HcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7ICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3llcyBzaGlwIG5vIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPSBudWxsICYmIGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlLXNoaXBcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaHVtYW5HcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL25vIHNoaXAgeWVzIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCA9PSBudWxsICYmIGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmUtaGl0XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGh1bWFuR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy95ZXMgc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwICE9IG51bGwgJiYgaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1zaGlwLWhpdFwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBodW1hbkdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvcHVsYXRlRW5lbXlCb2FyZCgpIHtcbiAgICBjbGVhckJvYXJkKGNvbXB1dGVyR3JpZCk7XG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICAgICAgLy9ubyBzaGlwIG5vIGhpdFxuICAgICAgICAgICAgaWYoY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgPT0gbnVsbCAmJiBjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8veWVzIHNoaXAgbm8gaGl0IFxuICAgICAgICAgICAgLy9jb21wdXRlciBzaGlwIG11c3QgYmUgaW52aXNpYmxlIHRvIHRoZSBodW1hbiBwbGF5ZXIgYmVmb3JlIGJlaW5nIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPSBudWxsICYmIGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlXCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbm8gc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09IG51bGwgJiYgY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1oaXRcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy95ZXMgc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwICE9IG51bGwgJiYgY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1zaGlwLWhpdFwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY29tcHV0ZXJTcXVhcmVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbXB1dGVyLWdyaWQgPiBkaXZcIikpO1xuXG4gICAgY29tcHV0ZXJTcXVhcmVzLmZvckVhY2goc3F1YXJlID0+IHtcbiAgICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGlja0hhbmRsZXIpO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGNsZWFyQm9hcmQoYm9hcmQpIHtcbiAgICB3aGlsZShib2FyZC5maXJzdENoaWxkKSB7XG4gICAgICAgIGJvYXJkLnJlbW92ZUNoaWxkKGJvYXJkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCB7IHBvcHVsYXRlRW5lbXlCb2FyZCwgcG9wdWxhdGVQbGF5ZXJCb2FyZCB9IGZyb20gXCIuL2RvbVwiO1xuXG5leHBvcnQgbGV0IGh1bWFuID0gbmV3IFBsYXllcihmYWxzZSk7XG5leHBvcnQgbGV0IGNvbXB1dGVyID0gbmV3IFBsYXllcih0cnVlKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDIsMyw1KTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMSw0KTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDQsNCwzKTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDYsNywzKTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDgsMSwyKTtcblxuICAgIGNvbXB1dGVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCwxLDIpO1xuICAgIFxuICAgIHBvcHVsYXRlUGxheWVyQm9hcmQoKTtcbiAgICBwb3B1bGF0ZUVuZW15Qm9hcmQoKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JXaW4oKSB7XG4gICAgbGV0IGNvbXB1dGVyU3F1YXJlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb21wdXRlci1ncmlkID4gZGl2XCIpKTtcblxuICAgIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIllvdSBXaW4hXCIpO1xuICAgICAgICBjb21wdXRlclNxdWFyZXMuZm9yRWFjaChzcXVhcmUgPT4ge1xuICAgICAgICAgICAgc3F1YXJlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGlja0hhbmRsZXIpO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBlbHNlIGlmKGh1bWFuLmdhbWVib2FyZC5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIllvdSBMb3NlIVwiKTtcbiAgICAgICAgY29tcHV0ZXJTcXVhcmVzLmZvckVhY2goc3F1YXJlID0+IHtcbiAgICAgICAgICAgIHNxdWFyZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihlKSB7XG4gICAgbGV0IGNsaWNrZWQgPSBlLnRhcmdldC5pZDtcbiAgICBsZXQgeCA9IGNsaWNrZWRbMF07XG4gICAgbGV0IHkgPSBjbGlja2VkWzFdO1xuICAgIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFt4XVt5XS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICBodW1hbi50YWtlVHVybihjb21wdXRlci5nYW1lYm9hcmQsIHgsIHkpO1xuICAgICAgICBwb3B1bGF0ZUVuZW15Qm9hcmQoKTtcbiAgICAgICAgY2hlY2tGb3JXaW4oKTsgXG4gICAgICAgIGNvbXB1dGVyLnRha2VUdXJuQUkoaHVtYW4uZ2FtZWJvYXJkKTtcbiAgICAgICAgcG9wdWxhdGVQbGF5ZXJCb2FyZCgpOyBcbiAgICB9XG59XG5cblxuXG5cbiJdLCJuYW1lcyI6WyJTaGlwIiwiY29uc3RydWN0b3IiLCJsZW5ndGgiLCJ0aGlzIiwiaGl0cyIsInN1bmsiLCJfbGVuZ3RoIiwiaGl0IiwiaXNTdW5rIiwiR2FtZWJvYXJkIiwiYm9hcmQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJzaGlwIiwiaXNIaXQiLCJzaGlwcyIsInBsYWNlU2hpcCIsInhQb3MiLCJ5UG9zIiwibmV3U2hpcCIsInB1c2giLCJpIiwicmVjZWl2ZUF0dGFjayIsImFsbFNoaXBzU3VuayIsImV2ZXJ5IiwiUGxheWVyIiwiaXNDb21wdXRlciIsImdhbWVib2FyZCIsImdlbmVyYXRlQ29vcmQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0YWtlVHVybiIsImVuZW15R2FtZWJvYXJkIiwidGFrZVR1cm5BSSIsImtlZXBHb2luZyIsImh1bWFuR3JpZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbXB1dGVyR3JpZCIsInBvcHVsYXRlUGxheWVyQm9hcmQiLCJjbGVhckJvYXJkIiwiaiIsImh1bWFuIiwic3F1YXJlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInRvU3RyaW5nIiwiYXBwZW5kQ2hpbGQiLCJwb3B1bGF0ZUVuZW15Qm9hcmQiLCJjb21wdXRlciIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGlja0hhbmRsZXIiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlIiwiY2xpY2tlZCIsInRhcmdldCIsImlkIiwieCIsInkiLCJjb21wdXRlclNxdWFyZXMiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNoZWNrRm9yV2luIl0sInNvdXJjZVJvb3QiOiIifQ==