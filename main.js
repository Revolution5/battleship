(()=>{"use strict";class t{constructor(t){this.length=t,this.hits=0,this.sunk=!1}get length(){return this._length}set length(t){this._length=t}hit(){this.hits+=1,this.isSunk()}isSunk(){this.hits==this.length&&(this.sunk=!0)}}class e{constructor(){this.board=[new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1})))],this.ships=[]}placeShip(e,i,r){if(null==this.board[e][i].ship){let a=new t(r);this.ships.push(a);for(let t=i;t<i+r;t++)this.board[e][t].ship=a}}receiveAttack(t,e){null!=this.board[t][e].ship?(this.board[t][e].ship.hit(),this.board[t][e].isHit=!0):null==this.board[t][e].ship&&(this.board[t][e].isHit=!0)}allShipsSunk(){if(this.ships.every((t=>1==t.sunk)))return!0}}class i{constructor(t){this.isComputer=t,this.gameboard=new e}generateCoord(){return Math.floor(10*Math.random())}takeTurn(t,e,i){t.receiveAttack(e,i)}takeTurnAI(t){let e=0,i=0,r=!0;for(;r;)e=this.generateCoord(),i=this.generateCoord(),0==t.board[e][i].isHit&&(t.receiveAttack(e,i),r=!1)}}let r=new i(!1),a=new i(!0),l=document.querySelector(".human-grid"),s=document.querySelector(".computer-grid");function n(){d(l);for(let t=0;t<10;t++)for(let e=0;e<10;e++)if(null==r.gameboard.board[t][e].ship&&0==r.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),l.appendChild(i)}else if(null!=r.gameboard.board[t][e].ship&&0==r.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship"),i.setAttribute("id",t.toString()+e.toString()),l.appendChild(i)}else if(null==r.gameboard.board[t][e].ship&&1==r.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-hit"),i.setAttribute("id",t.toString()+e.toString()),l.appendChild(i)}else if(null!=r.gameboard.board[t][e].ship&&1==r.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship-hit"),i.setAttribute("id",t.toString()+e.toString()),l.appendChild(i)}}function o(){d(s);for(let t=0;t<10;t++)for(let e=0;e<10;e++)if(null==a.gameboard.board[t][e].ship&&0==a.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),s.appendChild(i)}else if(null!=a.gameboard.board[t][e].ship&&0==a.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square"),i.setAttribute("id",t.toString()+e.toString()),s.appendChild(i)}else if(null==a.gameboard.board[t][e].ship&&1==a.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-hit"),i.setAttribute("id",t.toString()+e.toString()),s.appendChild(i)}else if(null!=a.gameboard.board[t][e].ship&&1==a.gameboard.board[t][e].isHit){let i=document.createElement("div");i.classList.add("square-ship-hit"),i.setAttribute("id",t.toString()+e.toString()),s.appendChild(i)}Array.from(document.querySelectorAll(".computer-grid > div")).forEach((t=>{t.addEventListener("click",h)}))}function d(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function h(t){let e=t.target.id,i=e[0],l=e[1];0==a.gameboard.board[i][l].isHit&&(r.takeTurn(a.gameboard,i,l),o(),function(){let t=Array.from(document.querySelectorAll(".computer-grid > div"));a.gameboard.allShipsSunk()?(console.log("You Win!"),t.forEach((t=>{t.removeEventListener("click",h)}))):r.gameboard.allShipsSunk()&&(console.log("You Lose!"),t.forEach((t=>{t.removeEventListener("click",h)})))}(),a.takeTurnAI(r.gameboard),n())}r.gameboard.placeShip(2,3,5),r.gameboard.placeShip(0,1,4),r.gameboard.placeShip(4,4,3),r.gameboard.placeShip(6,7,3),r.gameboard.placeShip(8,1,2),a.gameboard.placeShip(0,1,2),n(),o()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxHQUM5Qm9CLEVBQU1ULFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBQzlCb0IsRUFBTVQsVUFBVVgsVUFBVSxFQUFFLEVBQUUsR0FDOUJvQixFQUFNVCxVQUFVWCxVQUFVLEVBQUUsRUFBRSxHQUM5Qm9CLEVBQU1ULFVBQVVYLFVBQVUsRUFBRSxFQUFFLEdBRTlCcUIsRUFBU1YsVUFBVVgsVUFBVSxFQUFFLEVBQUUsR0FFakMwQixJQUNBVSxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFNoaXAge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5oaXRzID0gMDtcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbiAgICB9XG5cbiAgICBzZXQgbGVuZ3RoKGxlbmd0aCkge1xuICAgICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7XG4gICAgfVxuXG4gICAgaGl0KCkge1xuICAgICAgICB0aGlzLmhpdHMgKz0gMTtcbiAgICAgICAgdGhpcy5pc1N1bmsoKTtcbiAgICB9XG5cbiAgICBpc1N1bmsoKSB7XG4gICAgICAgIGlmKHRoaXMuaGl0cyA9PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zdW5rID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5cbmV4cG9ydCBjbGFzcyBHYW1lYm9hcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJvYXJkID0gW1xuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKVxuICAgICAgICBdXG5cbiAgICAgICAgdGhpcy5zaGlwcyA9IFtdXG4gICAgfVxuXG4gICAgLy8gZmlsbEJvYXJkKCkge1xuICAgIC8vICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgIC8vICAgICAgICAgbGV0IGFyciA9IG5ldyBBcnJheSgxMCk7XG4gICAgLy8gICAgICAgICB0aGlzLmJvYXJkW2ldID0gYXJyO1xuICAgIC8vICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAvLyAgICAgICAgICAgICBhcnJbal0gPSB7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIHBsYWNlU2hpcCh4UG9zLCB5UG9zLCBsZW5ndGgpIHtcbiAgICAgICAgaWYodGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5zaGlwID09IG51bGwpIHtcbiAgICAgICAgICAgIGxldCBuZXdTaGlwID0gbmV3IFNoaXAobGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc2hpcHMucHVzaChuZXdTaGlwKTtcbiAgICAgICAgICAgIC8vaG9yaXpvbnRhbCBzaGlwXG4gICAgICAgICAgICBmb3IobGV0IGkgPSB5UG9zOyBpIDwgeVBvcyArIGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVtpXS5zaGlwID0gbmV3U2hpcDsgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlY2VpdmVBdHRhY2soeFBvcywgeVBvcykge1xuICAgICAgICAvL2lmIHRoZSBzcXVhcmUgaGFzIGEgc2hpcCBvbiBpdFxuICAgICAgICBpZih0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5zaGlwLmhpdCgpO1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy9pZiB0aGVyZSBzcXVhcmUgZG9lcyBub3QgaGF2ZSBhIHNoaXAgb24gaXRcbiAgICAgICAgZWxzZSBpZih0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9IHRydWU7ICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxTaGlwc1N1bmsoKSB7XG4gICAgICAgIGlmKHRoaXMuc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLnN1bmsgPT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3Rvcihpc0NvbXB1dGVyKSB7XG4gICAgICAgIHRoaXMuaXNDb21wdXRlciA9IGlzQ29tcHV0ZXI7XG4gICAgICAgIHRoaXMuZ2FtZWJvYXJkID0gbmV3IEdhbWVib2FyZDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNvb3JkKCkge1xuICAgICAgICAvL3JhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgfVxuXG4gICAgdGFrZVR1cm4oZW5lbXlHYW1lYm9hcmQsIHhQb3MsIHlQb3MpIHtcbiAgICAgICAgZW5lbXlHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4UG9zLCB5UG9zKTsgXG4gICAgfVxuXG4gICAgdGFrZVR1cm5BSShlbmVteUdhbWVib2FyZCkge1xuICAgICAgICBsZXQgeFBvcyA9IDA7XG4gICAgICAgIGxldCB5UG9zID0gMDtcbiAgICAgICAgbGV0IGtlZXBHb2luZyA9IHRydWU7XG5cbiAgICAgICAgd2hpbGUoa2VlcEdvaW5nKSB7XG4gICAgICAgICAgICB4UG9zID0gdGhpcy5nZW5lcmF0ZUNvb3JkKCk7XG4gICAgICAgICAgICB5UG9zID0gdGhpcy5nZW5lcmF0ZUNvb3JkKCk7XG4gICAgICAgICAgICBpZihlbmVteUdhbWVib2FyZC5ib2FyZFt4UG9zXVt5UG9zXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGVuZW15R2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soeFBvcywgeVBvcyk7XG4gICAgICAgICAgICAgICAga2VlcEdvaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5cbmV4cG9ydCBsZXQgaHVtYW4gPSBuZXcgUGxheWVyKGZhbHNlKTtcbmV4cG9ydCBsZXQgY29tcHV0ZXIgPSBuZXcgUGxheWVyKHRydWUpO1xuXG5sZXQgaHVtYW5HcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5odW1hbi1ncmlkXCIpO1xubGV0IGNvbXB1dGVyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcHV0ZXItZ3JpZFwiKTtcblxuZnVuY3Rpb24gcG9wdWxhdGVQbGF5ZXJCb2FyZCgpIHtcbiAgICBjbGVhckJvYXJkKGh1bWFuR3JpZCk7XG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICAgICAgLy9ubyBzaGlwIG5vIGhpdFxuICAgICAgICAgICAgaWYoaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgPT0gbnVsbCAmJiBodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBodW1hbkdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8veWVzIHNoaXAgbm8gaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwICE9IG51bGwgJiYgaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmUtc2hpcFwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBodW1hbkdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbm8gc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09IG51bGwgJiYgaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1oaXRcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaHVtYW5HcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3llcyBzaGlwIHllcyBoaXRcbiAgICAgICAgICAgIGVsc2UgaWYoaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT0gbnVsbCAmJiBodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlLXNoaXAtaGl0XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGh1bWFuR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZUVuZW15Qm9hcmQoKSB7XG4gICAgY2xlYXJCb2FyZChjb21wdXRlckdyaWQpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgICAgIC8vbm8gc2hpcCBubyBoaXRcbiAgICAgICAgICAgIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09IG51bGwgJiYgY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmVcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7ICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3llcyBzaGlwIG5vIGhpdCBcbiAgICAgICAgICAgIC8vY29tcHV0ZXIgc2hpcCBtdXN0IGJlIGludmlzaWJsZSB0byB0aGUgaHVtYW4gcGxheWVyIGJlZm9yZSBiZWluZyBoaXRcbiAgICAgICAgICAgIGVsc2UgaWYoY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT0gbnVsbCAmJiBjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL25vIHNoaXAgeWVzIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCA9PSBudWxsICYmIGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmUtaGl0XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8veWVzIHNoaXAgeWVzIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPSBudWxsICYmIGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmUtc2hpcC1oaXRcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGNvbXB1dGVyU3F1YXJlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb21wdXRlci1ncmlkID4gZGl2XCIpKTtcblxuICAgIGNvbXB1dGVyU3F1YXJlcy5mb3JFYWNoKHNxdWFyZSA9PiB7XG4gICAgICAgIHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjbGVhckJvYXJkKGJvYXJkKSB7XG4gICAgd2hpbGUoYm9hcmQuZmlyc3RDaGlsZCkge1xuICAgICAgICBib2FyZC5yZW1vdmVDaGlsZChib2FyZC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydEdhbWUoKSB7XG4gICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcCgyLDMsNSk7XG4gICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcCgwLDEsNCk7XG4gICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcCg0LDQsMyk7XG4gICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcCg2LDcsMyk7XG4gICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcCg4LDEsMik7XG5cbiAgICBjb21wdXRlci5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMSwyKTtcbiAgICBcbiAgICBwb3B1bGF0ZVBsYXllckJvYXJkKCk7XG4gICAgcG9wdWxhdGVFbmVteUJvYXJkKCk7XG5cbiAgICBcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JXaW4oKSB7XG4gICAgbGV0IGNvbXB1dGVyU3F1YXJlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb21wdXRlci1ncmlkID4gZGl2XCIpKTtcblxuICAgIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIllvdSBXaW4hXCIpO1xuXG4gICAgICAgIGNvbXB1dGVyU3F1YXJlcy5mb3JFYWNoKHNxdWFyZSA9PiB7XG4gICAgICAgICAgICBzcXVhcmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrSGFuZGxlcik7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGVsc2UgaWYoaHVtYW4uZ2FtZWJvYXJkLmFsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiWW91IExvc2UhXCIpO1xuICAgICAgICBcbiAgICAgICAgY29tcHV0ZXJTcXVhcmVzLmZvckVhY2goc3F1YXJlID0+IHtcbiAgICAgICAgICAgIHNxdWFyZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBcbn1cblxuZnVuY3Rpb24gY2xpY2tIYW5kbGVyKGUpIHtcbiAgICBsZXQgY2xpY2tlZCA9IGUudGFyZ2V0LmlkO1xuICAgIGxldCB4ID0gY2xpY2tlZFswXTtcbiAgICBsZXQgeSA9IGNsaWNrZWRbMV07XG4gICAgaWYoY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW3hdW3ldLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICAgIGh1bWFuLnRha2VUdXJuKGNvbXB1dGVyLmdhbWVib2FyZCwgeCwgeSk7XG4gICAgICAgIHBvcHVsYXRlRW5lbXlCb2FyZCgpO1xuICAgICAgICBjaGVja0ZvcldpbigpOyBcbiAgICAgICAgY29tcHV0ZXIudGFrZVR1cm5BSShodW1hbi5nYW1lYm9hcmQpO1xuICAgICAgICBwb3B1bGF0ZVBsYXllckJvYXJkKCk7IFxuICAgIH1cbn1cblxuXG5cblxuIl0sIm5hbWVzIjpbIlNoaXAiLCJjb25zdHJ1Y3RvciIsImxlbmd0aCIsInRoaXMiLCJoaXRzIiwic3VuayIsIl9sZW5ndGgiLCJoaXQiLCJpc1N1bmsiLCJHYW1lYm9hcmQiLCJib2FyZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsInNoaXAiLCJpc0hpdCIsInNoaXBzIiwicGxhY2VTaGlwIiwieFBvcyIsInlQb3MiLCJuZXdTaGlwIiwicHVzaCIsImkiLCJyZWNlaXZlQXR0YWNrIiwiYWxsU2hpcHNTdW5rIiwiZXZlcnkiLCJQbGF5ZXIiLCJpc0NvbXB1dGVyIiwiZ2FtZWJvYXJkIiwiZ2VuZXJhdGVDb29yZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRha2VUdXJuIiwiZW5lbXlHYW1lYm9hcmQiLCJ0YWtlVHVybkFJIiwia2VlcEdvaW5nIiwiaHVtYW4iLCJjb21wdXRlciIsImh1bWFuR3JpZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbXB1dGVyR3JpZCIsInBvcHVsYXRlUGxheWVyQm9hcmQiLCJjbGVhckJvYXJkIiwiaiIsInNxdWFyZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJ0b1N0cmluZyIsImFwcGVuZENoaWxkIiwicG9wdWxhdGVFbmVteUJvYXJkIiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsaWNrSGFuZGxlciIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImUiLCJjbGlja2VkIiwidGFyZ2V0IiwiaWQiLCJ4IiwieSIsImNvbXB1dGVyU3F1YXJlcyIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2hlY2tGb3JXaW4iXSwic291cmNlUm9vdCI6IiJ9