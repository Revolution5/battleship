(()=>{"use strict";class t{constructor(t){this.length=t,this.hits=0,this.sunk=!1}get length(){return this._length}set length(t){this._length=t}hit(){this.hits+=1,this.isSunk()}isSunk(){this.hits==this.length&&(this.sunk=!0)}}class i{constructor(){this.board=[new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1}))),new Array(10).fill(null).map((()=>({ship:null,isHit:!1})))],this.ships=[]}placeShip(i,e,a){if(null==this.board[i][e].ship){let r=new t(a);this.ships.push(r);for(let t=e;t<e+a;t++)this.board[i][t].ship=r}}receiveAttack(t,i){null!=this.board[t][i].ship?(this.board[t][i].ship.hit(),this.board[t][i].isHit=!0):null==this.board[t][i].ship&&(this.board[t][i].isHit=!0)}allShipsSunk(){if(this.ships.every((t=>1==t.sunk)))return!0}}class e{constructor(t){this.isComputer=t,this.gameboard=new i}generateCoord(){return Math.floor(10*Math.random())}takeTurn(t,i,e){t.receiveAttack(i,e)}takeTurnAI(t){let i=0,e=0,a=!0;for(;a;)i=this.generateCoord(),e=this.generateCoord(),0==t.board[i][e].isHit&&(t.receiveAttack(i,e),a=!1)}}let a=new e(!1),r=new e(!0),l=document.querySelector(".human-grid"),s=document.querySelector(".computer-grid");function n(t){for(;t.firstChild;)t.removeChild(t.firstChild)}a.gameboard.placeShip(2,3,5),a.gameboard.placeShip(0,1,4),a.gameboard.placeShip(4,4,3),a.gameboard.placeShip(6,7,3),a.gameboard.placeShip(8,1,2),r.gameboard.placeShip(0,1,2),function(){n(l);for(let t=0;t<10;t++)for(let i=0;i<10;i++)if(null==a.gameboard.board[t][i].ship&&0==a.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",t.toString()+i.toString()),l.appendChild(e)}else if(null!=a.gameboard.board[t][i].ship&&0==a.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square-ship"),e.setAttribute("id",t.toString()+i.toString()),l.appendChild(e)}else if(null==a.gameboard.board[t][i].ship&&1==a.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square-hit"),e.setAttribute("id",t.toString()+i.toString()),l.appendChild(e)}else if(null!=a.gameboard.board[t][i].ship&&1==a.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square-ship-hit"),e.setAttribute("id",t.toString()+i.toString()),l.appendChild(e)}}(),function(){n(s);for(let t=0;t<10;t++)for(let i=0;i<10;i++)if(null==r.gameboard.board[t][i].ship&&0==r.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",t.toString()+i.toString()),s.appendChild(e)}else if(null!=r.gameboard.board[t][i].ship&&0==r.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",t.toString()+i.toString()),s.appendChild(e)}else if(null==r.gameboard.board[t][i].ship&&1==r.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square-hit"),e.setAttribute("id",t.toString()+i.toString()),s.appendChild(e)}else if(null!=r.gameboard.board[t][i].ship&&1==r.gameboard.board[t][i].isHit){let e=document.createElement("div");e.classList.add("square-ship-hit"),e.setAttribute("id",t.toString()+i.toString()),s.appendChild(e)}}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0IsQ0FDbEcsSUFBSWdDLEVBQVNQLFNBQVNRLGNBQWMsT0FDcENELEVBQU9FLFVBQVVDLElBQUksVUFDckJILEVBQU9JLGFBQWEsS0FBTTdCLEVBQUU4QixXQUFhTixFQUFFTSxZQUMzQ1YsRUFBYVcsWUFBWU4sUUFHeEIsR0FBMEMsTUFBdkNULEVBQVNWLFVBQVVsQixNQUFNWSxHQUFHd0IsR0FBR2hDLE1BQXdELEdBQXhDd0IsRUFBU1YsVUFBVWxCLE1BQU1ZLEdBQUd3QixHQUFHL0IsTUFBZSxDQUNqRyxJQUFJZ0MsRUFBU1AsU0FBU1EsY0FBYyxPQUNwQ0QsRUFBT0UsVUFBVUMsSUFBSSxjQUNyQkgsRUFBT0ksYUFBYSxLQUFNN0IsRUFBRThCLFdBQWFOLEVBQUVNLFlBQzNDVixFQUFhVyxZQUFZTixRQUd4QixHQUEwQyxNQUF2Q1QsRUFBU1YsVUFBVWxCLE1BQU1ZLEdBQUd3QixHQUFHaEMsTUFBd0QsR0FBeEN3QixFQUFTVixVQUFVbEIsTUFBTVksR0FBR3dCLEdBQUcvQixNQUFlLENBQ2pHLElBQUlnQyxFQUFTUCxTQUFTUSxjQUFjLE9BQ3BDRCxFQUFPRSxVQUFVQyxJQUFJLG1CQUNyQkgsRUFBT0ksYUFBYSxLQUFNN0IsRUFBRThCLFdBQWFOLEVBQUVNLFlBQzNDVixFQUFhVyxZQUFZTixJQXNCckNRLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgU2hpcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLmhpdHMgPSAwO1xuICAgICAgICB0aGlzLnN1bmsgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICAgIH1cblxuICAgIHNldCBsZW5ndGgobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aDtcbiAgICB9XG5cbiAgICBoaXQoKSB7XG4gICAgICAgIHRoaXMuaGl0cyArPSAxO1xuICAgICAgICB0aGlzLmlzU3VuaygpO1xuICAgIH1cblxuICAgIGlzU3VuaygpIHtcbiAgICAgICAgaWYodGhpcy5oaXRzID09IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnN1bmsgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVib2FyZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBbXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpLFxuICAgICAgICAgICAgbmV3IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe3NoaXA6IG51bGwsIGlzSGl0OiBmYWxzZX0pKSxcbiAgICAgICAgICAgIG5ldyBBcnJheSgxMCkuZmlsbChudWxsKS5tYXAoKCkgPT4gKHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9KSksXG4gICAgICAgICAgICBuZXcgQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKCgpID0+ICh7c2hpcDogbnVsbCwgaXNIaXQ6IGZhbHNlfSkpXG4gICAgICAgIF1cblxuICAgICAgICB0aGlzLnNoaXBzID0gW11cbiAgICB9XG5cbiAgICAvLyBmaWxsQm9hcmQoKSB7XG4gICAgLy8gICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgLy8gICAgICAgICBsZXQgYXJyID0gbmV3IEFycmF5KDEwKTtcbiAgICAvLyAgICAgICAgIHRoaXMuYm9hcmRbaV0gPSBhcnI7XG4gICAgLy8gICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgIC8vICAgICAgICAgICAgIGFycltqXSA9IHtzaGlwOiBudWxsLCBpc0hpdDogZmFsc2V9O1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgcGxhY2VTaGlwKHhQb3MsIHlQb3MsIGxlbmd0aCkge1xuICAgICAgICBpZih0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAgPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IG5ld1NoaXAgPSBuZXcgU2hpcChsZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5zaGlwcy5wdXNoKG5ld1NoaXApO1xuICAgICAgICAgICAgLy9ob3Jpem9udGFsIHNoaXBcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IHlQb3M7IGkgPCB5UG9zICsgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3hQb3NdW2ldLnNoaXAgPSBuZXdTaGlwOyAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVjZWl2ZUF0dGFjayh4UG9zLCB5UG9zKSB7XG4gICAgICAgIC8vaWYgdGhlIHNxdWFyZSBoYXMgYSBzaGlwIG9uIGl0XG4gICAgICAgIGlmKHRoaXMuYm9hcmRbeFBvc11beVBvc10uc2hpcCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLnNoaXAuaGl0KCk7XG4gICAgICAgICAgICB0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLmlzSGl0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvL2lmIHRoZXJlIHNxdWFyZSBkb2VzIG5vdCBoYXZlIGEgc2hpcCBvbiBpdFxuICAgICAgICBlbHNlIGlmKHRoaXMuYm9hcmRbeFBvc11beVBvc10uc2hpcCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkW3hQb3NdW3lQb3NdLmlzSGl0ID0gdHJ1ZTsgICBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFsbFNoaXBzU3VuaygpIHtcbiAgICAgICAgaWYodGhpcy5zaGlwcy5ldmVyeShzaGlwID0+IHNoaXAuc3VuayA9PSB0cnVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKGlzQ29tcHV0ZXIpIHtcbiAgICAgICAgdGhpcy5pc0NvbXB1dGVyID0gaXNDb21wdXRlcjtcbiAgICAgICAgdGhpcy5nYW1lYm9hcmQgPSBuZXcgR2FtZWJvYXJkO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQ29vcmQoKSB7XG4gICAgICAgIC8vcmFuZG9tIG51bWJlciBiZXR3ZWVuIDAgYW5kIDlcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICB9XG5cbiAgICB0YWtlVHVybihlbmVteUdhbWVib2FyZCwgeFBvcywgeVBvcykge1xuICAgICAgICBlbmVteUdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKHhQb3MsIHlQb3MpOyBcbiAgICB9XG5cbiAgICB0YWtlVHVybkFJKGVuZW15R2FtZWJvYXJkKSB7XG4gICAgICAgIGxldCB4UG9zID0gMDtcbiAgICAgICAgbGV0IHlQb3MgPSAwO1xuICAgICAgICBsZXQga2VlcEdvaW5nID0gdHJ1ZTtcblxuICAgICAgICB3aGlsZShrZWVwR29pbmcpIHtcbiAgICAgICAgICAgIHhQb3MgPSB0aGlzLmdlbmVyYXRlQ29vcmQoKTtcbiAgICAgICAgICAgIHlQb3MgPSB0aGlzLmdlbmVyYXRlQ29vcmQoKTtcbiAgICAgICAgICAgIGlmKGVuZW15R2FtZWJvYXJkLmJvYXJkW3hQb3NdW3lQb3NdLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZW5lbXlHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4UG9zLCB5UG9zKTtcbiAgICAgICAgICAgICAgICBrZWVwR29pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuZXhwb3J0IGxldCBodW1hbiA9IG5ldyBQbGF5ZXIoZmFsc2UpO1xuZXhwb3J0IGxldCBjb21wdXRlciA9IG5ldyBQbGF5ZXIodHJ1ZSk7XG5cbmxldCBodW1hbkdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmh1bWFuLWdyaWRcIik7XG5sZXQgY29tcHV0ZXJHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb21wdXRlci1ncmlkXCIpO1xuXG5mdW5jdGlvbiBwb3B1bGF0ZVBsYXllckJvYXJkKCkge1xuICAgIGNsZWFyQm9hcmQoaHVtYW5HcmlkKTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgICAgICAvL25vIHNoaXAgbm8gaGl0XG4gICAgICAgICAgICBpZihodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCA9PSBudWxsICYmIGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlXCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGh1bWFuR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpOyAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy95ZXMgc2hpcCBubyBoaXRcbiAgICAgICAgICAgIGVsc2UgaWYoaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT0gbnVsbCAmJiBodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1zaGlwXCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGh1bWFuR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9ubyBzaGlwIHllcyBoaXRcbiAgICAgICAgICAgIGVsc2UgaWYoaHVtYW4uZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgPT0gbnVsbCAmJiBodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlLWhpdFwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBodW1hbkdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8veWVzIHNoaXAgeWVzIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihodW1hbi5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPSBudWxsICYmIGh1bWFuLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmUtc2hpcC1oaXRcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaHVtYW5HcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlRW5lbXlCb2FyZCgpIHtcbiAgICBjbGVhckJvYXJkKGNvbXB1dGVyR3JpZCk7XG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICAgICAgLy9ubyBzaGlwIG5vIGhpdFxuICAgICAgICAgICAgaWYoY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgPT0gbnVsbCAmJiBjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8veWVzIHNoaXAgbm8gaGl0IFxuICAgICAgICAgICAgLy9jb21wdXRlciBzaGlwIG11c3QgYmUgaW52aXNpYmxlIHRvIHRoZSBodW1hbiBwbGF5ZXIgYmVmb3JlIGJlaW5nIGhpdFxuICAgICAgICAgICAgZWxzZSBpZihjb21wdXRlci5nYW1lYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPSBudWxsICYmIGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlXCIpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpLnRvU3RyaW5nKCkgKyBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyR3JpZC5hcHBlbmRDaGlsZChzcXVhcmUpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbm8gc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09IG51bGwgJiYgY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1oaXRcIik7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImlkXCIsIGkudG9TdHJpbmcoKSArIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHcmlkLmFwcGVuZENoaWxkKHNxdWFyZSk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy95ZXMgc2hpcCB5ZXMgaGl0XG4gICAgICAgICAgICBlbHNlIGlmKGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXS5zaGlwICE9IG51bGwgJiYgY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZS1zaGlwLWhpdFwiKTtcbiAgICAgICAgICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaS50b1N0cmluZygpICsgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdyaWQuYXBwZW5kQ2hpbGQoc3F1YXJlKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFyQm9hcmQoYm9hcmQpIHtcbiAgICB3aGlsZShib2FyZC5maXJzdENoaWxkKSB7XG4gICAgICAgIGJvYXJkLnJlbW92ZUNoaWxkKGJvYXJkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDIsMyw1KTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMSw0KTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDQsNCwzKTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDYsNywzKTtcbiAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKDgsMSwyKTtcblxuICAgIGNvbXB1dGVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCwxLDIpO1xuICAgIFxuICAgIHBvcHVsYXRlUGxheWVyQm9hcmQoKTtcbiAgICBwb3B1bGF0ZUVuZW15Qm9hcmQoKTtcbn1cblxuXG4iXSwibmFtZXMiOlsiU2hpcCIsImNvbnN0cnVjdG9yIiwibGVuZ3RoIiwidGhpcyIsImhpdHMiLCJzdW5rIiwiX2xlbmd0aCIsImhpdCIsImlzU3VuayIsIkdhbWVib2FyZCIsImJvYXJkIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwic2hpcCIsImlzSGl0Iiwic2hpcHMiLCJwbGFjZVNoaXAiLCJ4UG9zIiwieVBvcyIsIm5ld1NoaXAiLCJwdXNoIiwiaSIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJldmVyeSIsIlBsYXllciIsImlzQ29tcHV0ZXIiLCJnYW1lYm9hcmQiLCJnZW5lcmF0ZUNvb3JkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidGFrZVR1cm4iLCJlbmVteUdhbWVib2FyZCIsInRha2VUdXJuQUkiLCJrZWVwR29pbmciLCJodW1hbiIsImNvbXB1dGVyIiwiaHVtYW5HcmlkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29tcHV0ZXJHcmlkIiwiY2xlYXJCb2FyZCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImoiLCJzcXVhcmUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsInBvcHVsYXRlUGxheWVyQm9hcmQiLCJwb3B1bGF0ZUVuZW15Qm9hcmQiXSwic291cmNlUm9vdCI6IiJ9